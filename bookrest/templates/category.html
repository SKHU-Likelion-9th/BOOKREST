{% extends 'base.html' %} 
{% load static %} 
{% block content %}
<link rel="stylesheet" href="{% static 'css/category.css' %}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    $('#get_humanities').click(function() {
        var department = $('p').text();
        var humanities = '인문융합자율학부';
        if(department == humanities){
            $('p').text('시바견');
        }
    })
</script>

<h1>카테고리 페이지</h1>
    <div class="category">
        
        <div class="category_nav">
            <div class="item">전체보기</div>
            <div class="item" name="major_인문">인문</div>
            <div class="item" name="major_사회">사회</div>
            <div class="item" name="major_미컨">미컨</div>
            <div class="item" name="major_IT">IT</div>
        </div>    
        
        <form method="GET" action="{% url 'category' %}">
            <div class="category_search">
                <div class="text_item"><input type="text" placeholder="책 제목을 입력하세요." name="search" value="{{search}}"></div>
                <div class="button_item"><button>검색</button></div>
            </div>
        </form>

        <div class="book_list">
            {% for book in book_list %}
            <div class="book">

                
                <div class="title" id="title" name="title">
                    <h2 >{{ book.title }}</h2>
                    
                </div>
                <div class="book_middle">
                    <hr>
                <div class="book_card">
                    {% if book.image %}
                    <img src="{{ book.image }}" alt=""/>
                    {% endif %}
                    <div class="book_card_column">
                        <span class="book_category">
                            <h4 class="column_title">카테고리</h4><button class="star_img"><img id="img" src="{% static 'img/star_unclick.png' %}"></button>
                            <br><p class="department">{{ book.department }}</p>
                        </span>
                        <span class="book_author"><h4 class="column_title">저자</h4>&ensp;{{ book.author }}
                        </span>
                        <span class="book_publisher">
                            <h4 class="column_title">출판사</h4>&ensp;{{ book.publisher }}
                        </span>
                        <span class="book_date">
                            <h4 class="column_title">출간일</h4>&ensp;{{ book.pubdate }}
                        </span class="book_left">
                        <span class="book_date">
                            <h4 class="column_title">재고</h4>&ensp;{{ book.stock }}
                        </span class="book_left">
                        <span class="book_button">
                            <button><a href="../detail">대여하기</a></button>
                        </span>
                    </div>
                </div>
                </div>
                


            </div>
            {% endfor %}

        </div>
        
        <div class="page">
        {% if book_list.has_previous %}
            <div class="page_button">
            <a href='?page={{book_list.previous_page_number}}&search={{search}}'>이전</a>
            </div>
        {% endif %}
        <span>{{book_list.number}}</span>
        <span>&ensp;/&ensp;</span>
        <span>{{book_list.paginator.num_pages}}</span>
        {% if book_list.has_next %}
            <div class="page_button">
            <a href='?page={{book_list.next_page_number}}&search={{search}}'>다음</a>
            </div>
        {% endif %}
        </div>
    
    
    </div>

    <!--js 불러오기-->
    <script src="{% static 'js/category.js '%}"></script>
    <script src="{% static 'js/star.js '%}"></script>
    
{% endblock %}


<!-- 
  지인 작업한 html
<form method="GET" action="{% url 'category' %}">
  <input type="text" placeholder="책 제목을 입력하세요." name="search" value="{{search}}">
  <button type="submit">검색</button>
</form>
<div>
    {% for book in book_list %}
      <h3>{{ book.title }}</h1>
      <p>{{ book.department }}</p>
      <hr>
    {% endfor %}
  {% if book_list.has_previous %}
    <a href='?page={{book_list.previous_page_number}}&search={{search}}'>이전</a>
  {% endif %}
    <span>{{book_list.number}}</span>
    <span>/</span>
    <span>{{book_list.paginator.num_pages}}</span>
  {% if book_list.has_next %}
    <a href='?page={{book_list.next_page_number}}&search={{search}}'>다음</a>
  {% endif %}
</div> -->